---
import { Image } from "astro:assets";
import { m } from "../paraglide/messages.js";
---

<footer
  class="relative w-full bg-[#f9f9f9] flex flex-col lg:flex-row justify-between px-8 md:px-16 lg:px-24 pt-12 pb-10 md:pb-0"
  role="contentinfo"
>
  <div
    class="flex flex-col items-center lg:items-start gap-2 my-4 md:my-0 md:mb-8 sm:text-center"
  >
    <Image src="/ionkolLogoNew.svg" alt="key" width={175} height={70} />
    <p class="text-lg text-left">{m["footer.tagline"]()}</p>
    <div class="w-56 border-1 border-red-200 border-t mt-2"></div>

    <div class="mt-5">
      <div class="text-lg grid grid-cols-2 md:grid-cols-1 gap-4 md:gap-1 text-center sm:text-left">
        <span>{m["footer.locations.japan"]()}</span>
        <span>{m["footer.locations.korea"]()}</span>
        <span>{m["footer.locations.malaysia"]()}</span>
        <span>{m["footer.locations.singapore"]()}</span>
      </div>
    </div>

    <div class="hidden md:block mt-5">
      <Image src="/instagramLogo.png" alt="key" width={24} height={24} />
    </div>
  </div>

  <nav
    aria-label="Footer Navigation"
    class="grid grid-cols-2 lg:grid-cols-3 gap-8 sm:gap-12 justify-center"
  >
    <div class="flex flex-col h-full relative">
      <div>
        <h3
          class="text-[#0d0c22] text-lg font-semibold leading-normal tracking-tight mb-2 text-center lg:text-left"
        >
          {m["footer.services.title"]()}
        </h3>
        <ul class="flex flex-col text-center lg:text-left">
          <li>
            <a
              href="/features"
              class="text-lg leading-normal tracking-tight"
              data-link="/features"
            >
              {m["footer.services.explore"]()}
            </a>
          </li>
          <li>
            <a
              href="/features"
              class="text-lg leading-normal tracking-tight"
              data-link="/features"
            >
              {m["footer.services.analyze"]()}
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div>
      <h3
        class="text-[#0d0c22] text-lg font-semibold leading-normal tracking-tight mb-2 text-center lg:text-left"
      >
        {m["footer.getStarted.title"]()}
      </h3>
      <ul class="flex flex-col text-center lg:text-left">
        <li>
          <a
            href="/demo"
            class="text-lg leading-normal tracking-tight"
            data-link="/demo"
          >
            {m["footer.getStarted.bookDemo"]()}
          </a>
        </li>
        <li>
          <a
            href="/contactUs"
            class="text-lg leading-normal tracking-tight"
            data-link="/contactUs"
          >
            {m["footer.getStarted.contactUs"]()}
          </a>
        </li>
      </ul>
    </div>

    <div class="">
      <h3
        class="text-[#0d0c22] text-lg font-semibold leading-normal tracking-tight mb-2 text-center lg:text-left"
      >
        {m["footer.whoWeAre.title"]()}
      </h3>
      <ul class="flex flex-col text-center lg:text-left">
        <li>
          <a
            href="/resources"
            class="text-lg leading-normal tracking-tight"
            data-link="/resources"
          >
            {m["footer.whoWeAre.blog"]()}
          </a>
        </li>
        <li>
          <a
            href="/resources"
            class="text-lg leading-normal tracking-tight"
            data-link="/resources"
          >
            {m["footer.whoWeAre.faqs"]()}
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="flex flex-row justify-center gap-4 absolute w-64 bottom-0 md:right-16 md:bottom-20 self-center">
    <a href="/privacy" class="text-lg leading-normal tracking-tight" data-link="/privacy">
      {m["footer.legal.privacyPolicy"]()}
    </a>
    <span>|</span>
    <a href="/terms" class="text-lg leading-normal tracking-tight" data-link="/terms">
      {m["footer.legal.termsOfService"]()}
    </a>
  </div>
</footer>

<script is:inline>
  function updateFooterLinks() {
    const pathSegments = window.location.pathname.split("/");
    const currentLang = pathSegments[1] || "en";

    document.querySelectorAll("a[data-link]").forEach((link) => {
      const basePath = link.getAttribute("data-link");
      // Only update links that aren't external or anchor links
      if (
        basePath &&
        !basePath.startsWith("http") &&
        !basePath.startsWith("#")
      ) {
        link.href = `/${currentLang}${basePath}`;
      }
    });
  }

  document.addEventListener("DOMContentLoaded", updateFooterLinks);
</script>
